--// ZWCscripts Fixed Dark Menu + Modern Switch (Mobile/PC tam tıklanabilir, şeffaflık azaltıldı, beyaz yazı) //--

local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local CFG = {
    MainColor = Color3.fromRGB(18,18,18),
    Accent = Color3.fromRGB(40,40,40),
    ButtonOn = Color3.fromRGB(85,85,85),
    ButtonOff = Color3.fromRGB(30,30,30),
    SwitchOn = Color3.fromRGB(220,220,220),
    SwitchOff = Color3.fromRGB(60,60,60),
    SwitchKnob = Color3.fromRGB(255,255,255),
    Text = Color3.fromRGB(255,255,255),
    SubText = Color3.fromRGB(180,180,180),
    BGTransparency = 0.07, -- daha koyu
    PanelTransparency = 0.12,
    Font = Enum.Font.GothamBold,
}

local gui = Instance.new("ScreenGui")
gui.Name = "ZWCscripts_DarkMenuSwitch"
gui.Parent = LocalPlayer.PlayerGui
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false

local main = Instance.new("Frame")
main.Name = "Main"
main.Size = UDim2.new(0, 430, 0, 350)
main.Position = UDim2.new(0.5, -215, 0.28, 0)
main.BackgroundColor3 = CFG.MainColor
main.BackgroundTransparency = CFG.BGTransparency
main.BorderSizePixel = 0
main.ClipsDescendants = true
main.Parent = gui
main.Active = true
main.Draggable = true
main.ZIndex = 2

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 22)
corner.Parent = main

-- Üst bar ve başlık
local bar = Instance.new("Frame")
bar.Size = UDim2.new(1,0,0,38)
bar.BackgroundColor3 = CFG.Accent
bar.BackgroundTransparency = CFG.PanelTransparency
bar.BorderSizePixel = 0
bar.Parent = main

local barCorner = Instance.new("UICorner")
barCorner.CornerRadius = UDim.new(0, 15)
barCorner.Parent = bar

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,-90,1,0)
title.Position = UDim2.new(0,18,0,0)
title.BackgroundTransparency = 1
title.Text = "ZWCscripts Universal Menu"
title.Font = CFG.Font
title.TextColor3 = CFG.Text
title.TextStrokeTransparency = 0.8
title.TextSize = 19
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = bar

-- Animasyonlu oval buton (kapat/küçült)
local function animatedButton(icon, color, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 34, 0, 34)
    btn.BackgroundColor3 = color
    btn.BackgroundTransparency = 0.15
    btn.AutoButtonColor = false
    btn.Text = icon
    btn.Font = CFG.Font
    btn.TextSize = 21
    btn.TextColor3 = CFG.Text
    btn.ZIndex = 5
    btn.BorderSizePixel = 0
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 17)
    btnCorner.Parent = btn
    btn.MouseButton1Down:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.08), {BackgroundColor3 = Color3.fromRGB(100,0,0)}):Play()
    end)
    btn.MouseButton1Up:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = color}):Play()
    end)
    btn.MouseButton1Click:Connect(callback)
    btn.TouchTap:Connect(callback)
    return btn
end

local close = animatedButton("✕", Color3.fromRGB(32,16,16), function() gui:Destroy() end)
close.Position = UDim2.new(1,-42,0.5,-17)
close.Parent = bar

local minimize = animatedButton("—", Color3.fromRGB(22,22,22), function()
    main.Visible = false
    gui.Minimized.Visible = true
end)
minimize.Position = UDim2.new(1,-80,0.5,-17)
minimize.Parent = bar

-- Minimize olduğunda açmak için küçük yuvarlak buton
local mini = Instance.new("Frame")
mini.Name = "Minimized"
mini.Size = UDim2.new(0,52,0,52)
mini.Position = UDim2.new(0,30,0.3,0)
mini.BackgroundColor3 = CFG.Accent
mini.BackgroundTransparency = CFG.PanelTransparency
mini.Visible = false
mini.Parent = gui

local miniCorner = Instance.new("UICorner")
miniCorner.CornerRadius = UDim.new(1,0)
miniCorner.Parent = mini

local miniBtn = animatedButton("≡", CFG.ButtonOn, function()
    main.Visible = true
    mini.Visible = false
end)
miniBtn.Size = UDim2.new(1,-12,1,-12)
miniBtn.Position = UDim2.new(0,6,0,6)
miniBtn.Parent = mini

--== Sekme menüsü ==--
local tablist = Instance.new("Frame")
tablist.Size = UDim2.new(0, 110, 1, -52)
tablist.Position = UDim2.new(0,0,0,42)
tablist.BackgroundColor3 = CFG.Accent
tablist.BackgroundTransparency = CFG.PanelTransparency
tablist.BorderSizePixel = 0
tablist.Parent = main

local tabCorner = Instance.new("UICorner")
tabCorner.CornerRadius = UDim.new(0,16)
tabCorner.Parent = tablist

local tabs = {"Visuals","Aim","Movement"}
local tabFrames = {}

for i,tab in ipairs(tabs) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -14, 0, 40)
    btn.Position = UDim2.new(0, 7, 0, (i-1)*48 + 8)
    btn.BackgroundColor3 = CFG.ButtonOff
    btn.BackgroundTransparency = 0.05
    btn.Text = tab
    btn.Font = CFG.Font
    btn.TextColor3 = CFG.Text
    btn.TextSize = 17
    btn.BorderSizePixel = 0
    btn.AutoButtonColor = false
    local bcorner = Instance.new("UICorner")
    bcorner.CornerRadius = UDim.new(0, 12)
    bcorner.Parent = btn
    btn.Parent = tablist
    tabFrames[i] = Instance.new("Frame")
    tabFrames[i].Size = UDim2.new(1, -120, 1, -60)
    tabFrames[i].Position = UDim2.new(0, 118, 0, 52)
    tabFrames[i].BackgroundColor3 = CFG.MainColor
    tabFrames[i].BackgroundTransparency = 0.11
    tabFrames[i].BorderSizePixel = 0
    tabFrames[i].Visible = (i==1)
    local tcorner = Instance.new("UICorner")
    tcorner.CornerRadius = UDim.new(0,12)
    tcorner.Parent = tabFrames[i]
    tabFrames[i].Parent = main
    local function selectTab()
        for j=1,#tabs do
            tabFrames[j].Visible = (i==j)
            tablist[j].BackgroundColor3 = (i==j) and CFG.ButtonOn or CFG.ButtonOff
            tablist[j].TextColor3 = CFG.Text
        end
    end
    btn.MouseButton1Click:Connect(selectTab)
    btn.TouchTap:Connect(selectTab)
end

--== Modern slide anahtar (switch) ==--
local function SlideSwitch(parent, y, text, default, callback)
    local row = Instance.new("Frame")
    row.Size = UDim2.new(1,-36,0,44)
    row.Position = UDim2.new(0,14,0,y)
    row.BackgroundTransparency = 1
    row.Parent = parent

    local lbl = Instance.new("TextLabel")
    lbl.Size = UDim2.new(1,-58,1,0)
    lbl.Position = UDim2.new(0,0,0,0)
    lbl.BackgroundTransparency = 1
    lbl.Text = text
    lbl.Font = CFG.Font
    lbl.TextColor3 = CFG.Text
    lbl.TextSize = 16
    lbl.TextXAlignment = Enum.TextXAlignment.Left
    lbl.Parent = row

    local sCont = Instance.new("Frame")
    sCont.Size = UDim2.new(0,48,0,28)
    sCont.Position = UDim2.new(1,-48,0.5,-14)
    sCont.BackgroundTransparency = 1
    sCont.Parent = row

    local bar = Instance.new("Frame")
    bar.Size = UDim2.new(1, -8, 0, 14)
    bar.Position = UDim2.new(0,4,0,7)
    bar.BackgroundColor3 = CFG.SwitchOff
    bar.BorderSizePixel = 0
    bar.BackgroundTransparency = 0.09
    bar.Parent = sCont

    local barCorner = Instance.new("UICorner")
    barCorner.CornerRadius = UDim.new(1,0)
    barCorner.Parent = bar

    local knob = Instance.new("Frame")
    knob.Size = UDim2.new(0,20,0,20)
    knob.Position = default and UDim2.new(1,-22,0.5,-10) or UDim2.new(0,2,0.5,-10)
    knob.BackgroundColor3 = CFG.SwitchKnob
    knob.BorderSizePixel = 0
    knob.Parent = sCont
    knob.ZIndex = 2
    local kcorner = Instance.new("UICorner")
    kcorner.CornerRadius = UDim.new(1,0)
    kcorner.Parent = knob

    -- Touch ve mouse eventleri
    local state = default
    local function set(v)
        state = v
        TweenService:Create(bar, TweenInfo.new(0.17), {
            BackgroundColor3 = v and CFG.SwitchOn or CFG.SwitchOff
        }):Play()
        TweenService:Create(knob, TweenInfo.new(0.21, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Position = v and UDim2.new(1,-22,0.5,-10) or UDim2.new(0,2,0.5,-10)
        }):Play()
        callback(v)
    end
    local function toggle()
        set(not state)
    end

    local dragging = false
    knob.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
        end
    end)
    knob.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)
    knob.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local x = input.Position.X - sCont.AbsolutePosition.X
            local v = x > sCont.AbsoluteSize.X/2
            set(v)
        end
    end)
    -- Basınca toggle (hem mobil hem PC)
    knob.MouseButton1Click:Connect(toggle)
    knob.TouchTap:Connect(toggle)
    bar.MouseButton1Click:Connect(toggle)
    bar.TouchTap:Connect(toggle)
    row.MouseButton1Click:Connect(toggle)
    row.TouchTap:Connect(toggle)
    set(false)
    return set, function() return state end
end

--== Visuals Tab (ESP toggles) ==--
local y = 16
local setESP = SlideSwitch(tabFrames[1], y, "Neon Box ESP", false, function(v) _G.ESPEnabled = v end)
local setName = SlideSwitch(tabFrames[1], y+52, "Show Name", false, function(v) _G.ShowName = v end)
local setDist = SlideSwitch(tabFrames[1], y+104, "Show Distance", false, function(v) _G.ShowDist = v end)
local setTrace = SlideSwitch(tabFrames[1], y+156, "Tracers", false, function(v) _G.ShowTracer = v end)

--== Aim Tab (Aimbot ve kill aura) ==--
local ay = 16
local setAim = SlideSwitch(tabFrames[2], ay, "Odak Yardımı", false, function(v) _G.HelperView = v end)
local setAura = SlideSwitch(tabFrames[2], ay+52, "Yakın Mesafe Vuruş", false, function(v) _G.AutoTouch = v end)

local shortcut = Instance.new("TextLabel")
shortcut.Size = UDim2.new(1,-36,0,36)
shortcut.Position = UDim2.new(0,14,0,ay+112)
shortcut.BackgroundTransparency = 1
shortcut.Text = "Açıkken: Ekrana tıkla/dokun → en yakına odaklan / Q tuşu → yakın vuruş"
shortcut.Font = CFG.Font
shortcut.TextColor3 = CFG.SubText
shortcut.TextSize = 13
shortcut.TextWrapped = true
shortcut.Parent = tabFrames[2]

--== Movement Tab (Hız, zıplama, uçma) ==--
local my = 16
local setSpeed = SlideSwitch(tabFrames[3], my, "Yürüme Hızı", false, function(v)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = v and 30 or 16
    end
end)
local setJump = SlideSwitch(tabFrames[3], my+52, "Zıplama Gücü", false, function(v)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid").JumpPower = v and 80 or 50
    end
end)
local setFly = SlideSwitch(tabFrames[3], my+104, "Uçma", false, function(v)
    _G.ZWC_Fly = v
end)

-- Uçma sistemi (eski kodunla uyumlu)
_G.ZWC_Fly = false
local function FlyLoop()
    while true do
        if _G.ZWC_Fly then
            pcall(function()
                if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then return end
                local hum = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                hum.PlatformStand = false
                local root = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                if root then
                    local dir = Vector3.new(0,0,0)
                    if UserInputService:IsKeyDown(Enum.KeyCode.W) then dir = dir + Camera.CFrame.LookVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.S) then dir = dir - Camera.CFrame.LookVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.A) then dir = dir - Camera.CFrame.RightVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.D) then dir = dir + Camera.CFrame.RightVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.Space) then dir = dir + Vector3.new(0,1,0) end
                    if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then dir = dir - Vector3.new(0,1,0) end
                    if dir.Magnitude > 0 then
                        root.Velocity = dir.Unit * 55
                    else
                        root.Velocity = Vector3.new(0,0,0)
                    end
                end
            end)
        end
        wait(0.02)
    end
end
spawn(FlyLoop)

-- Mobil sürükleme desteği
local function enableMobileDrag(f)
    local dragToggle, dragStart, startPos
    f.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragToggle = true
            dragStart = input.Position
            startPos = f.Position
            input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragToggle = false end end)
        end
    end)
    f.InputChanged:Connect(function(input)
        if dragToggle and (input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement) then
            local delta = input.Position-dragStart
            f.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset+delta.X, startPos.Y.Scale, startPos.Y.Offset+delta.Y)
        end
    end)
end
enableMobileDrag(main)
enableMobileDrag(mini)

--== Yardımcı Odak (Aimbot benzeri) ==--
_G.HelperView = false
local function getClosestPart()
    local closest, dist = nil, math.huge
    for _,plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            local pos = plr.Character.HumanoidRootPart.Position
            local screen, onScreen = Camera:WorldToViewportPoint(pos)
            if onScreen then
                local mag = (Vector2.new(UserInputService:GetMouseLocation().X, UserInputService:GetMouseLocation().Y) - Vector2.new(screen.X, screen.Y)).Magnitude
                if mag < dist then
                    closest = plr.Character.HumanoidRootPart
                    dist = mag
                end
            end
        end
    end
    return closest
end

local function gentlyMoveView(targetPart)
    if not targetPart then return end
    local camCF = Camera.CFrame.Position
    local to = targetPart.Position
    for i=1,7 do
        local lerpPos = camCF:Lerp(to, i/7)
        Camera.CFrame = CFrame.new(lerpPos, to)
        RunService.RenderStepped:Wait()
    end
end

local function onInput(input, gpe)
    if gpe then return end
    if not _G.HelperView then return end
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        local part = getClosestPart()
        gentlyMoveView(part)
    end
end
UserInputService.InputBegan:Connect(onInput)

--== Yakın Vuruş (Kill Aura benzeri) ==--
_G.AutoTouch = false
local function getClosestForTouch()
    local closest, dist = nil, 7
    for _,plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            local pos = plr.Character.HumanoidRootPart.Position
            local mypos = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character.HumanoidRootPart.Position
            if mypos then
                local d = (pos-mypos).Magnitude
                if d < dist then
                    closest = plr.Character.HumanoidRootPart
                    dist = d
                end
            end
        end
    end
    return closest
end

UserInputService.InputBegan:Connect(function(input, gp)
    if not _G.AutoTouch then return end
    if input.KeyCode == Enum.KeyCode.Q then
        local part = getClosestForTouch()
        if part then
            local tool = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Tool")
            if tool and tool:FindFirstChild("Handle") then
                for i=1,3 do
                    tool.Handle.CFrame = CFrame.new(tool.Handle.Position, part.Position)
                    RunService.RenderStepped:Wait()
                end
            end
            pcall(function() tool:Activate() end)
        end
    end
end)

--== ESP Kısmını Buraya Ekleyebilirsin! (_G.ESPEnabled, _G.ShowName, _G.ShowDist, _G.ShowTracer ile uyumlu) ==--
