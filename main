--// UNIVERSAL ESP + MODERN GUI (PC & MOBILE) //--

-- Ayarlanabilir renk ve görünüm ayarları
local ESP_COLOR = Color3.fromRGB(60, 200, 255)
local BACKGROUND_COLOR = Color3.fromRGB(30, 32, 40)
local BORDER_COLOR = Color3.fromRGB(80, 80, 90)
local BUTTON_COLOR = Color3.fromRGB(40, 140, 255)
local BUTTON_TEXT_COLOR = Color3.fromRGB(255,255,255)
local TEXT_COLOR = Color3.fromRGB(230,230,240)
local ESP_BOX_THICKNESS = 2

-- Roblox servisleri
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

-- Ekran ve GUI ana objeleri
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "EpicUniversalScript"
ScreenGui.IgnoreGuiInset = true
ScreenGui.ResetOnSpawn = false
pcall(function() ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui") end) -- PC/Mobile uyumu

-- GUI ana çerçeve
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 420, 0, 320)
MainFrame.Position = UDim2.new(0.5, -210, 0.25, 0)
MainFrame.BackgroundColor3 = BACKGROUND_COLOR
MainFrame.BorderColor3 = BORDER_COLOR
MainFrame.BorderSizePixel = 2
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- Sürüklenebilir/Küçültülebilir buton
local MinBtn = Instance.new("TextButton")
MinBtn.Name = "MinBtn"
MinBtn.Size = UDim2.new(0, 38, 0, 38)
MinBtn.Position = UDim2.new(1, -42, 0, 4)
MinBtn.BackgroundColor3 = BUTTON_COLOR
MinBtn.Text = "-"
MinBtn.TextColor3 = BUTTON_TEXT_COLOR
MinBtn.TextScaled = true
MinBtn.Font = Enum.Font.GothamBold
MinBtn.BorderSizePixel = 0
MinBtn.ZIndex = 2
MinBtn.Parent = MainFrame

-- Menü başlığı
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, -46, 0, 38)
Title.Position = UDim2.new(0, 8, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "Epic Script Menu"
Title.Font = Enum.Font.GothamSemibold
Title.TextColor3 = TEXT_COLOR
Title.TextSize = 22
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = MainFrame

-- Kapatma butonu
local CloseBtn = Instance.new("TextButton")
CloseBtn.Name = "CloseBtn"
CloseBtn.Size = UDim2.new(0, 38, 0, 38)
CloseBtn.Position = UDim2.new(1, -84, 0, 4)
CloseBtn.BackgroundColor3 = Color3.fromRGB(255,90,90)
CloseBtn.Text = "X"
CloseBtn.TextColor3 = BUTTON_TEXT_COLOR
CloseBtn.TextScaled = true
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.BorderSizePixel = 0
CloseBtn.ZIndex = 2
CloseBtn.Parent = MainFrame

-- Yan menü butonları
local Tabs = {"ESP", "Auto Farm", "Teleport", "Settings"}
local TabFrames, TabButtons = {}, {}
local SelectedTab = 1

for i, tab in ipairs(Tabs) do
    -- Buton
    local btn = Instance.new("TextButton")
    btn.Name = "TabButton"..i
    btn.Size = UDim2.new(0, 110, 0, 36)
    btn.Position = UDim2.new(0, 10, 0, 48 + (i-1)*42)
    btn.BackgroundColor3 = BUTTON_COLOR
    btn.Text = tab
    btn.TextColor3 = BUTTON_TEXT_COLOR
    btn.Font = Enum.Font.GothamSemibold
    btn.TextSize = 16
    btn.BorderSizePixel = 0
    btn.ZIndex = 2
    btn.Parent = MainFrame
    TabButtons[i] = btn

    -- İç çerçeve
    local frame = Instance.new("Frame")
    frame.Name = tab.."Tab"
    frame.Size = UDim2.new(1, -130, 1, -60)
    frame.Position = UDim2.new(0, 125, 0, 48)
    frame.BackgroundTransparency = 1
    frame.Visible = (i==1)
    frame.Parent = MainFrame
    TabFrames[i] = frame

    btn.MouseButton1Click:Connect(function()
        for j=1,#Tabs do
            TabFrames[j].Visible = (i==j)
            TabButtons[j].BackgroundColor3 = (i==j) and Color3.fromRGB(80,180,255) or BUTTON_COLOR
        end
        SelectedTab = i
    end)
end

-- ESP Sekmesi
local ESPEnabled = false
local ESPBox = nil

local ESPToggle = Instance.new("TextButton")
ESPToggle.Size = UDim2.new(0, 130, 0, 40)
ESPToggle.Position = UDim2.new(0, 20, 0, 30)
ESPToggle.BackgroundColor3 = BUTTON_COLOR
ESPToggle.Text = "ESP: OFF"
ESPToggle.TextColor3 = BUTTON_TEXT_COLOR
ESPToggle.Font = Enum.Font.GothamBold
ESPToggle.TextSize = 18
ESPToggle.Parent = TabFrames[1]

-- ESP Çizim fonksiyonu
local function CreateESP(plr)
    if plr == LocalPlayer or not plr.Character or not plr.Character:FindFirstChild("HumanoidRootPart") then return end
    local Billboard = Instance.new("BillboardGui")
    Billboard.Name = "EpicESP"
    Billboard.Size = UDim2.new(0,100,0,40)
    Billboard.AlwaysOnTop = true
    Billboard.Adornee = plr.Character:FindFirstChild("HumanoidRootPart")
    Billboard.Parent = plr.Character

    local Box = Instance.new("Frame")
    Box.Size = UDim2.new(1,0,1,0)
    Box.BackgroundTransparency = 1
    Box.BorderColor3 = ESP_COLOR
    Box.BorderSizePixel = ESP_BOX_THICKNESS
    Box.Parent = Billboard

    local Name = Instance.new("TextLabel")
    Name.Size = UDim2.new(1,0,0,20)
    Name.Position = UDim2.new(0,0,1,0)
    Name.BackgroundTransparency = 1
    Name.Text = plr.DisplayName or plr.Name
    Name.TextColor3 = ESP_COLOR
    Name.TextScaled = true
    Name.Font = Enum.Font.GothamBold
    Name.Parent = Billboard
end

local function RemoveESP()
    for _,plr in ipairs(Players:GetPlayers()) do
        if plr.Character and plr.Character:FindFirstChild("EpicESP") then
            plr.Character.EpicESP:Destroy()
        end
    end
end

local function ToggleESP(state)
    ESPEnabled = state
    ESPToggle.Text = "ESP: "..(state and "ON" or "OFF")
    RemoveESP()
    if state then
        for _,plr in ipairs(Players:GetPlayers()) do
            CreateESP(plr)
        end
    end
end

ESPToggle.MouseButton1Click:Connect(function()
    ToggleESP(not ESPEnabled)
end)

Players.PlayerAdded:Connect(function(plr)
    if ESPEnabled then
        plr.CharacterAdded:Connect(function()
            wait(1)
            CreateESP(plr)
        end)
    end
end)

Players.PlayerRemoving:Connect(function(plr)
    if plr.Character and plr.Character:FindFirstChild("EpicESP") then
        plr.Character.EpicESP:Destroy()
    end
end)

-- Diğer Sekmeler (boş, ileride dolduracağız)
for i=2,#Tabs do
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -30, 1, -30)
    label.Position = UDim2.new(0, 15, 0, 15)
    label.BackgroundTransparency = 1
    label.Text = Tabs[i].." için özellikler yakında!"
    label.TextColor3 = TEXT_COLOR
    label.Font = Enum.Font.Gotham
    label.TextSize = 20
    label.TextWrapped = true
    label.Parent = TabFrames[i]
end

-- Ayarlar sekmesi (örnek)
local info = Instance.new("TextLabel")
info.Size = UDim2.new(1, -30, 0, 70)
info.Position = UDim2.new(0, 15, 0, 20)
info.BackgroundTransparency = 1
info.Text = "Menüyü istediğin yere sürükle.\nKüçültmek için sağ üstteki '-' butonunu kullan."
info.TextColor3 = TEXT_COLOR
info.Font = Enum.Font.Gotham
info.TextSize = 16
info.TextWrapped = true
info.Parent = TabFrames[4]

-- Minimize (küçültme)
local Minimized = false
local MiniFrame = Instance.new("Frame")
MiniFrame.Size = UDim2.new(0, 60, 0, 38)
MiniFrame.Position = UDim2.new(0, 30, 0, 60)
MiniFrame.BackgroundColor3 = BUTTON_COLOR
MiniFrame.Visible = false
MiniFrame.Active = true
MiniFrame.Draggable = true
MiniFrame.Parent = ScreenGui

local MiniIcon = Instance.new("TextButton")
MiniIcon.Size = UDim2.new(1,0,1,0)
MiniIcon.BackgroundTransparency = 1
MiniIcon.Text = "≡"
MiniIcon.TextColor3 = BUTTON_TEXT_COLOR
MiniIcon.Font = Enum.Font.GothamBold
MiniIcon.TextSize = 36
MiniIcon.Parent = MiniFrame

MinBtn.MouseButton1Click:Connect(function()
    Minimized = not Minimized
    MainFrame.Visible = not Minimized
    MiniFrame.Visible = Minimized
end)

MiniIcon.MouseButton1Click:Connect(function()
    Minimized = false
    MainFrame.Visible = true
    MiniFrame.Visible = false
end)

-- Kapatma (GUI'yı tamamen kapatır)
CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    RemoveESP()
end)

-- Mobil destek (Touch sürükleme)
local function EnableMobileDrag(frame)
    local dragToggle, dragInput, dragStart, startPos = nil, nil, nil, nil
    local function update(input)
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragToggle = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then dragToggle = false end
            end)
        end
    end)
    frame.InputChanged:Connect(function(input)
        if dragToggle and (input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement) then
            update(input)
        end
    end)
end
EnableMobileDrag(MainFrame)
EnableMobileDrag(MiniFrame)

-- Responsive (mobil/PC) boyutlandırma
local function ResponsiveSize()
    local viewport = workspace.CurrentCamera and workspace.CurrentCamera.ViewportSize or Vector2.new(800,600)
    if viewport.X < 600 then
        MainFrame.Size = UDim2.new(0, 320, 0, 270)
        MainFrame.Position = UDim2.new(0.5, -160, 0.15, 0)
    else
        MainFrame.Size = UDim2.new(0, 420, 0, 320)
        MainFrame.Position = UDim2.new(0.5, -210, 0.25, 0)
    end
end
ResponsiveSize()
if workspace.CurrentCamera then
    workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(ResponsiveSize)
end

-- Son!
