--// ZWCscripts Delta ESP + Aim + Kill Aura + Movement + Modern Menü (Siyah/Mavi) //-- 

-- Ayarlar
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

local CFG = {
    MainColor = Color3.fromRGB(13,13,13),        
    Accent = Color3.fromRGB(0, 110, 255),        
    ButtonOn = Color3.fromRGB(0, 110, 255),      
    ButtonOff = Color3.fromRGB(35,35,35),        
    Text = Color3.fromRGB(255,255,255),          
    SubText = Color3.fromRGB(180,180,180),       
    BGTransparency = 0.05,
    Font = Enum.Font.GothamBold,
}

-- Universal Variables
_G.ESPEnabled = false
_G.ShowName = false
_G.ShowDist = false
_G.ShowTracer = false
_G.HelperView = false
_G.AutoTouch = false
_G.ZWC_Fly = false

-- Menü GUI
local gui = Instance.new("ScreenGui")
gui.Name = "ZWCscripts_BlackBlueMenu"
gui.Parent = game:GetService("CoreGui")
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false

local main = Instance.new("Frame")
main.Name = "Main"
main.Size = UDim2.new(0, 430, 0, 340)
main.Position = UDim2.new(0.5, -215, 0.22, 0)
main.BackgroundColor3 = CFG.MainColor
main.BackgroundTransparency = CFG.BGTransparency
main.BorderSizePixel = 0
main.ClipsDescendants = true
main.Parent = gui
main.Active = true
main.Draggable = true
main.ZIndex = 2

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 24)
corner.Parent = main

-- ÜST BAR
local bar = Instance.new("Frame")
bar.Size = UDim2.new(1,0,0,46)
bar.BackgroundColor3 = CFG.MainColor
bar.BackgroundTransparency = 0
bar.BorderSizePixel = 0
bar.Parent = main
local barCorner = Instance.new("UICorner")
barCorner.CornerRadius = UDim.new(0, 16)
barCorner.Parent = bar

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,-120,1,0)
title.Position = UDim2.new(0,21,0,0)
title.BackgroundTransparency = 1
title.Text = "ZWCscripts Universal Menu"
title.Font = CFG.Font
title.TextColor3 = CFG.Text
title.TextStrokeTransparency = 0.85
title.TextSize = 22
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = bar

-- KAPAT/KÜÇÜLT
local function animatedButton(icon, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 38, 0, 38)
    btn.BackgroundColor3 = CFG.MainColor
    btn.BackgroundTransparency = 0
    btn.Text = icon
    btn.Font = CFG.Font
    btn.TextSize = 27
    btn.TextColor3 = CFG.Text
    btn.ZIndex = 5
    btn.BorderSizePixel = 0
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(1, 0)
    btnCorner.Parent = btn
    btn.MouseButton1Click:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.11), {BackgroundColor3 = CFG.Accent}):Play()
        callback()
        wait(0.13)
        TweenService:Create(btn, TweenInfo.new(0.12), {BackgroundColor3 = CFG.MainColor}):Play()
    end)
    btn.TouchTap:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.11), {BackgroundColor3 = CFG.Accent}):Play()
        callback()
        wait(0.13)
        TweenService:Create(btn, TweenInfo.new(0.12), {BackgroundColor3 = CFG.MainColor}):Play()
    end)
    return btn
end

local close = animatedButton("✕", function() gui:Destroy() end)
close.Position = UDim2.new(1,-48,0.5,-19)
close.Parent = bar

local minimize = animatedButton("—", function()
    main.Visible = false
    gui.Minimized.Visible = true
end)
minimize.Position = UDim2.new(1,-96,0.5,-19)
minimize.Parent = bar

-- Minimize için küçük mavi buton
local mini = Instance.new("Frame")
mini.Name = "Minimized"
mini.Size = UDim2.new(0,54,0,54)
mini.Position = UDim2.new(0,26,0.3,0)
mini.BackgroundColor3 = CFG.Accent
mini.BackgroundTransparency = 0
mini.Visible = false
mini.Parent = gui

local miniCorner = Instance.new("UICorner")
miniCorner.CornerRadius = UDim.new(1,0)
miniCorner.Parent = mini

local miniBtn = Instance.new("TextButton")
miniBtn.Text = "≡"
miniBtn.Font = CFG.Font
miniBtn.TextSize = 28
miniBtn.TextColor3 = CFG.Text
miniBtn.Size = UDim2.new(1,-12,1,-12)
miniBtn.Position = UDim2.new(0,6,0,6)
miniBtn.BackgroundColor3 = CFG.Accent
miniBtn.BackgroundTransparency = 0
miniBtn.BorderSizePixel = 0
miniBtn.Parent = mini
local miniBtnCorner = Instance.new("UICorner")
miniBtnCorner.CornerRadius = UDim.new(1,0)
miniBtnCorner.Parent = miniBtn
miniBtn.MouseButton1Click:Connect(function()
    main.Visible = true
    mini.Visible = false
end)
miniBtn.TouchTap:Connect(function()
    main.Visible = true
    mini.Visible = false
end)

-- Sekmeler
local tablist = Instance.new("Frame")
tablist.Size = UDim2.new(0, 122, 1, -60)
tablist.Position = UDim2.new(0,0,0,50)
tablist.BackgroundColor3 = CFG.MainColor
tablist.BackgroundTransparency = 0
tablist.BorderSizePixel = 0
tablist.Parent = main
local tabCorner = Instance.new("UICorner")
tabCorner.CornerRadius = UDim.new(0, 16)
tabCorner.Parent = tablist

local tabs = {"Visuals","Aim","Movement"}
local tabFrames = {}
local function setTab(i)
    for j=1,#tabs do
        tabFrames[j].Visible = (i==j)
        tablist[j].BackgroundColor3 = (i==j) and CFG.Accent or CFG.ButtonOff
        tablist[j].TextColor3 = CFG.Text
    end
end

for i,tab in ipairs(tabs) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -14, 0, 44)
    btn.Position = UDim2.new(0, 7, 0, (i-1)*54 + 6)
    btn.BackgroundColor3 = CFG.ButtonOff
    btn.BackgroundTransparency = 0
    btn.Text = tab
    btn.Font = CFG.Font
    btn.TextColor3 = CFG.Text
    btn.TextSize = 18
    btn.BorderSizePixel = 0
    btn.AutoButtonColor = false
    local bcorner = Instance.new("UICorner")
    bcorner.CornerRadius = UDim.new(0, 14)
    bcorner.Parent = btn
    btn.Parent = tablist
    tabFrames[i] = Instance.new("Frame")
    tabFrames[i].Size = UDim2.new(1, -132, 1, -62)
    tabFrames[i].Position = UDim2.new(0, 128, 0, 54)
    tabFrames[i].BackgroundColor3 = CFG.MainColor
    tabFrames[i].BackgroundTransparency = 0.12
    tabFrames[i].BorderSizePixel = 0
    tabFrames[i].Visible = (i==1)
    local tcorner = Instance.new("UICorner")
    tcorner.CornerRadius = UDim.new(0,13)
    tcorner.Parent = tabFrames[i]
    tabFrames[i].Parent = main
    btn.MouseButton1Click:Connect(function() setTab(i) end)
    btn.TouchTap:Connect(function() setTab(i) end)
end

-- Mavi Circle Toggle
local function CircleToggle(parent, y, text, default, callback)
    local row = Instance.new("Frame")
    row.Size = UDim2.new(1,-36,0,46)
    row.Position = UDim2.new(0,14,0,y)
    row.BackgroundTransparency = 1
    row.Parent = parent

    local lbl = Instance.new("TextLabel")
    lbl.Size = UDim2.new(1,-54,1,0)
    lbl.Position = UDim2.new(0,0,0,0)
    lbl.BackgroundTransparency = 1
    lbl.Text = text
    lbl.Font = CFG.Font
    lbl.TextColor3 = CFG.Text
    lbl.TextSize = 16
    lbl.TextXAlignment = Enum.TextXAlignment.Left
    lbl.Parent = row

    local holder = Instance.new("TextButton")
    holder.Size = UDim2.new(0,40,0,40)
    holder.Position = UDim2.new(1,-42,0.5,-20)
    holder.BackgroundTransparency = 1
    holder.Text = ""
    holder.Parent = row

    local circle = Instance.new("Frame")
    circle.Size = UDim2.new(0,36,0,36)
    circle.Position = UDim2.new(0,2,0,2)
    circle.BackgroundColor3 = CFG.ButtonOff
    circle.BackgroundTransparency = 0
    circle.BorderSizePixel = 0
    circle.Parent = holder
    local cc = Instance.new("UICorner")
    cc.CornerRadius = UDim.new(1,0)
    cc.Parent = circle

    local check = Instance.new("TextLabel")
    check.Size = UDim2.new(1,0,1,0)
    check.Position = UDim2.new(0,0,0,0)
    check.BackgroundTransparency = 1
    check.TextColor3 = CFG.Text
    check.Text = "✓"
    check.TextSize = 21
    check.Font = CFG.Font
    check.Visible = false
    check.Parent = circle

    local state = false
    local function set(val)
        state = val
        TweenService:Create(circle, TweenInfo.new(0.16), {
            BackgroundColor3 = state and CFG.ButtonOn or CFG.ButtonOff
        }):Play()
        check.Visible = state
        callback(state)
    end
    holder.MouseButton1Click:Connect(function() set(not state) end)
    holder.TouchTap:Connect(function() set(not state) end)
    set(false)
    return set, function() return state end
end

-- VISUALS TAB
local y = 19
CircleToggle(tabFrames[1], y, "Neon Box ESP", false, function(v) _G.ESPEnabled = v end)
CircleToggle(tabFrames[1], y+52, "Show Name", false, function(v) _G.ShowName = v end)
CircleToggle(tabFrames[1], y+104, "Show Distance", false, function(v) _G.ShowDist = v end)
CircleToggle(tabFrames[1], y+156, "Tracers", false, function(v) _G.ShowTracer = v end)

-- AIM TAB
local ay = 19
CircleToggle(tabFrames[2], ay, "Odak Yardımı", false, function(v) _G.HelperView = v end)
CircleToggle(tabFrames[2], ay+52, "Yakın Mesafe Vuruş", false, function(v) _G.AutoTouch = v end)
local shortcut = Instance.new("TextLabel")
shortcut.Size = UDim2.new(1,-36,0,36)
shortcut.Position = UDim2.new(0,14,0,ay+112)
shortcut.BackgroundTransparency = 1
shortcut.Text = "Açıkken: Ekrana tıkla/dokun → en yakına odaklan / Q tuşu → yakın vuruş"
shortcut.Font = CFG.Font
shortcut.TextColor3 = CFG.SubText
shortcut.TextSize = 13
shortcut.TextWrapped = true
shortcut.Parent = tabFrames[2]

-- MOVEMENT TAB
local my = 19
CircleToggle(tabFrames[3], my, "Yürüme Hızı", false, function(v)
    local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if hum then hum.WalkSpeed = v and 30 or 16 end
end)
CircleToggle(tabFrames[3], my+52, "Zıplama Gücü", false, function(v)
    local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if hum then hum.JumpPower = v and 80 or 50 end
end)
CircleToggle(tabFrames[3], my+104, "Uçma", false, function(v) _G.ZWC_Fly = v end)

-- UÇMA
spawn(function()
    while true do
        if _G.ZWC_Fly then
            pcall(function()
                local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                if not hum then return end
                hum.PlatformStand = false
                local root = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                if root then
                    local dir = Vector3.new(0,0,0)
                    if UserInputService:IsKeyDown(Enum.KeyCode.W) then dir = dir + Camera.CFrame.LookVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.S) then dir = dir - Camera.CFrame.LookVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.A) then dir = dir - Camera.CFrame.RightVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.D) then dir = dir + Camera.CFrame.RightVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.Space) then dir = dir + Vector3.new(0,1,0) end
                    if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then dir = dir - Vector3.new(0,1,0) end
                    if dir.Magnitude > 0 then
                        root.Velocity = dir.Unit * 55
                    else
                        root.Velocity = Vector3.new(0,0,0)
                    end
                end
            end)
        end
        wait(0.02)
    end
end)

-- Mobil sürükleme
local function enableMobileDrag(f)
    local dragToggle, dragStart, startPos
    f.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragToggle = true
            dragStart = input.Position
            startPos = f.Position
            input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragToggle = false end end)
        end
    end)
    f.InputChanged:Connect(function(input)
        if dragToggle and (input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement) then
            local delta = input.Position-dragStart
            f.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset+delta.X, startPos.Y.Scale, startPos.Y.Offset+delta.Y)
        end
    end)
end
enableMobileDrag(main)
enableMobileDrag(mini)

-- ESP SİSTEMİ (Duvar arkası kutu, isim, mesafe, tracer)
local function clearESP(char)
    if char then
        if char:FindFirstChild("ZWCEspBox") then char.ZWCEspBox:Destroy() end
        if char:FindFirstChild("ZWCEspBill") then char.ZWCEspBill:Destroy() end
        if char:FindFirstChild("ZWCEspTracer") then char.ZWCEspTracer:Destroy() end
    end
end

local function addESP(plr)
    if plr == LocalPlayer then return end
    local function charAdded(char)
        -- Kutu
        if not char:FindFirstChild("ZWCEspBox") then
            local box = Instance.new("BoxHandleAdornment")
            box.Name = "ZWCEspBox"
            box.Adornee = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso") or char:FindFirstChild("UpperTorso")
            box.Size = (box.Adornee and box.Adornee.Size + Vector3.new(0.1,0.1,0.1)) or Vector3.new(2,4,2)
            box.AlwaysOnTop = true
            box.ZIndex = 8
            box.Transparency = 0.35
            box.Color3 = Color3.fromRGB(0, 110, 255)
            box.LineThickness = 2
            box.Parent = char
        end
        -- Billboard
        if not char:FindFirstChild("ZWCEspBill") then
            local bb = Instance.new("BillboardGui")
            bb.Name = "ZWCEspBill"
            bb.Adornee = char:FindFirstChild("Head") or char:FindFirstChild("HumanoidRootPart")
            bb.Size = UDim2.new(0, 130, 0, 36)
            bb.AlwaysOnTop = true
            bb.StudsOffset = Vector3.new(0, 2, 0)
            bb.Parent = char
            local name = Instance.new("TextLabel")
            name.Name = "ZWCEspName"
            name.BackgroundTransparency = 1
            name.TextColor3 = Color3.fromRGB(0, 170, 255)
            name.TextStrokeTransparency = 0.4
            name.Font = CFG.Font
            name.TextSize = 14
            name.Size = UDim2.new(1,0,0.5,0)
            name.Text = plr.DisplayName or plr.Name
            name.Parent = bb
            local dist = Instance.new("TextLabel")
            dist.Name = "ZWCEspDist"
            dist.BackgroundTransparency = 1
            dist.TextColor3 = Color3.fromRGB(0, 170, 255)
            dist.TextStrokeTransparency = 0.2
            dist.Font = CFG.Font
            dist.TextSize = 13
            dist.Position = UDim2.new(0,0,0.5,0)
            dist.Size = UDim2.new(1,0,0.5,0)
            dist.Text = ""
            dist.Parent = bb
        end
        -- Tracer (her frame çizilecek)
        if not char:FindFirstChild("ZWCEspTracer") then
            local att = Instance.new("Attachment")
            att.Name = "ZWCEspTracer"
            att.Parent = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso") or char:FindFirstChild("UpperTorso")
        end
    end
    if plr.Character then charAdded(plr.Character) end
    plr.CharacterAdded:Connect(function(c) clearESP(c); charAdded(c) end)
end

for _,plr in ipairs(Players:GetPlayers()) do addESP(plr) end
Players.PlayerAdded:Connect(addESP)
Players.PlayerRemoving:Connect(function(plr) clearESP(plr.Character) end)

RunService.RenderStepped:Connect(function()
    for _,plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character then
            local char = plr.Character
            -- Kutuyu güncelle
            local box = char:FindFirstChild("ZWCEspBox")
            if box then box.Visible = _G.ESPEnabled end
            local bb = char:FindFirstChild("ZWCEspBill")
            if bb then
                bb.Enabled = _G.ShowName or _G.ShowDist
                local name = bb:FindFirstChild("ZWCEspName")
                if name then name.Visible = _G.ShowName end
                local dist = bb:FindFirstChild("ZWCEspDist")
                if dist then
                    dist.Visible = _G.ShowDist
                    if _G.ShowDist and char:FindFirstChild("HumanoidRootPart") then
                        local studs = (char.HumanoidRootPart.Position-Camera.CFrame.Position).Magnitude
                        dist.Text = string.format("%.0fm", studs/3.3)
                    end
                end
            end
        end
    end
end)

-- AİM (Odak): Ekrana tıklandığında en yakın oyuncuya odaklanır
local function getClosestPart()
    local closest, dist = nil, math.huge
    for _,plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            local pos = plr.Character.HumanoidRootPart.Position
            local screen, onScreen = Camera:WorldToViewportPoint(pos)
            if onScreen then
                local mag = (Vector2.new(UserInputService:GetMouseLocation().X, UserInputService:GetMouseLocation().Y) - Vector2.new(screen.X, screen.Y)).Magnitude
                if mag < dist then
                    closest = plr.Character.HumanoidRootPart
                    dist = mag
                end
            end
        end
    end
    return closest
end

local function gentlyMoveView(targetPart)
    if not targetPart then return end
    local camCF = Camera.CFrame.Position
    local to = targetPart.Position
    for i=1,7 do
        local lerpPos = camCF:Lerp(to, i/7)
        Camera.CFrame = CFrame.new(lerpPos, to)
        RunService.RenderStepped:Wait()
    end
end

local function onInput(input, gpe)
    if gpe then return end
    if not _G.HelperView then return end
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        local part = getClosestPart()
        gentlyMoveView(part)
    end
end
UserInputService.InputBegan:Connect(onInput)

-- Kill Aura (Q ile en yakına saldırı)
local function getClosestForTouch()
    local closest, dist = nil, 7
    for _,plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            local pos = plr.Character.HumanoidRootPart.Position
            local mypos = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character.HumanoidRootPart.Position
            if mypos then
                local d = (pos-mypos).Magnitude
                if d < dist then
                    closest = plr.Character.HumanoidRootPart
                    dist = d
                end
            end
        end
    end
    return closest
end

UserInputService.InputBegan:Connect(function(input, gp)
    if not _G.AutoTouch then return end
    if input.KeyCode == Enum.KeyCode.Q then
        local part = getClosestForTouch()
        if part then
            local tool = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Tool")
            if tool and tool:FindFirstChild("Handle") then
                for i=1,3 do
                    tool.Handle.CFrame = CFrame.new(tool.Handle.Position, part.Position)
                    RunService.RenderStepped:Wait()
                end
            end
            pcall(function() tool:Activate() end)
        end
    end
end)

-- Tracer (çizgi) ister misin? Drawing.new platforma göre uyumlu olmadığından, istersen eklenebilir!

-- Son
